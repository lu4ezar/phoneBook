(this["webpackJsonpphone-book-cra"]=this["webpackJsonpphone-book-cra"]||[]).push([[0],{25:function(e,n,t){e.exports=t(38)},30:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),i=t.n(o),c=(t(30),t(2)),u=t(1),l=Object(u.c)({name:"search",initialState:"",reducers:{setSearchString:function(e,n){return n.payload}}}),d=l.reducer,s=t(5),p=function(e){return e.phoneBook},f=function(e){return e.phoneBook.loading},m=function(e){return e.search},h=function(e){return e.editingId},b=Object(s.a)([function(e){return e.phoneBook},m],(function(e,n){return e.phoneBook.filter((function(e){return Object.keys(e).filter((function(t){var r;return"id"!==t&&(null===(r=e[t])||void 0===r?void 0:r.includes(n))})).length>0}))})),g=function(){var e=Object(c.b)(),n=Object(c.c)(m),t=l.actions.setSearchString;return a.a.createElement("input",{type:"search",value:n,onChange:function(n){var r=n.currentTarget.value;e(t(r))},placeholder:"search"})},v=t(24),E=t(7),y=t(3),j=t(9),k=t(10);function O(){var e=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid silver;\n  align-items: center;\n  & span {\n    display: flex;\n    flex: 1 0 25%;\n    & svg {\n      padding: 1em;\n      cursor: pointer;\n    }\n    &.buttons {\n      justify-content: flex-end;\n    }\n  }\n"]);return O=function(){return e},e}var x=k.a.li(O()),w=function(e){var n=e.data,t=e.onDelete,r=e.onEdit,o=n.phone,i=n.name,c=n.email;return a.a.createElement(x,null,a.a.createElement("span",null,o),a.a.createElement("span",null,i),a.a.createElement("span",null,c),a.a.createElement("span",{className:"buttons"},a.a.createElement("div",{onClick:t,title:"delete"},a.a.createElement(y.g,{icon:y.e,size:"medium"})),a.a.createElement("div",{onClick:r,title:"edit"},a.a.createElement(y.g,{icon:y.b,size:"medium"}))))},B=t(23),C=t(15);function S(){var e=Object(j.a)(['\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0.5em 0;\n  padding: 0.5em 0;\n  border-bottom: 1px solid silver;\n  height: 3em;\n  &.editing {\n    color: red;\n    border-radius: 4px;\n    background: lightgray;\n    input {\n      background: lightgray;\n      color: purple;\n      font-size: 1.2em;\n      font-weight: bold;\n    }\n  }\n  input,\n  .quarter {\n    flex: 1 0 25%;\n  }\n  .quarter {\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  input:not([type="submit"]):not([type="button"]) {\n    border: none;\n  }\n  & svg {\n    padding: 0 1em;\n    cursor: pointer;\n  }\n  .disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    padding-right: 2em;\n  }\n']);return S=function(){return e},e}var I=k.a.form(S()),N={name:"",phone:"",email:""},P=function(e,n){var t=n.field,r=n.value;return"reset"===n.type?N:Object(E.a)({},e,Object(C.a)({},t,r))},T=function(e){var n=e.data,t=void 0===n?N:n,o=e.isEditing,i=void 0!==o&&o,u=e.onSubmit,l=e.onCancel,d=Object(r.useReducer)(P,t),s=Object(B.a)(d,2),p=s[0],m=s[1],h=p.name,b=p.phone,g=p.email,v=function(e){var n=e.currentTarget,t=n.name,r=n.value;m({field:t,value:r})},E=function(e){e.preventDefault(),u(p),m({type:"reset"})},j="pending"===Object(c.c)(f)?y.a:i?y.d:y.c,k=!b||!h||!g;return a.a.createElement(I,{onSubmit:E,className:i?"editing":""},a.a.createElement("input",{name:"phone",type:"tel",value:b,placeholder:"phone",onChange:v}),a.a.createElement("input",{name:"name",type:"text",value:h,placeholder:"name",onChange:v}),a.a.createElement("input",{name:"email",type:"email",value:g,placeholder:"email",onChange:v}),a.a.createElement("div",{className:"quarter"},i&&a.a.createElement("span",{onClick:l,title:"cancel"},a.a.createElement(y.g,{icon:y.f,size:"medium"})),a.a.createElement("span",{className:k?"disabled":"",onClick:k?function(){}:E,title:"submit"},a.a.createElement(y.g,{icon:j,size:"medium"}))))},z=t(8),D=t.n(z),J=t(13),q="https://phone-book-decentury.herokuapp.com/api/pb/",L=function(e){return fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Object(E.a)({},e)})})},R=function(e){return fetch(q,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Object(E.a)({},e)})})},M=function(e){return fetch(q+e,{method:"DELETE"})},U=Object(u.b)("phoneBook/fetchPhoneBook",Object(J.a)(D.a.mark((function e(){var n,t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q);case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",Object.values(t).filter((function(e){return e})));case 7:case"end":return e.stop()}}),e)})))),A=Object(u.b)("phoneBook/createPhoneNumber",function(){var e=Object(J.a)(D.a.mark((function e(n){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(n);case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,200===t.status){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}()),F=Object(u.b)("phoneBook/deletePhoneNumber",function(){var e=Object(J.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),G=Object(u.b)("phoneBook/updatePhoneNumber",function(){var e=Object(J.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),H=Object(u.c)({name:"editingId",initialState:null,reducers:{setEditingId:function(e,n){return n.payload},dropEditingId:function(e){return null}}}),K=H.actions,Q=K.setEditingId,V=K.dropEditingId,W=H.reducer;function X(){var e=Object(j.a)(["\n  list-style-type: none;\n  margin: 1em 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  height: 100%;\n"]);return X=function(){return e},e}var Y=k.a.ul(X()),Z=function(){var e=Object(c.c)(p),n=e.loading,t=e.error,o=Object(c.c)(h),i=Object(c.b)(),u=Object(c.c)(b);Object(r.useEffect)((function(){return i(U()),function(){i(U())}}),[i]);var l=function(){i(V())};return a.a.createElement(Y,null,u.map((function(e){var n=e.id,t=Object(v.a)(e,["id"]);return n===o?a.a.createElement(T,{key:n,data:t,isEditing:!0,onCancel:l,onSubmit:function(e){return function(e,n){i(G(Object(E.a)({},e,{id:n}))),i(V())}(e,n)}}):a.a.createElement(w,{key:n,data:t,onDelete:function(){return function(e){i(F(e))}(n)},onEdit:function(){return function(e){i(Q(e))}(n)}})})),"pending"===n&&a.a.createElement("p",null,"Loading..."),t&&a.a.createElement("p",null,"Error: ",t))};function $(){var e=Object(j.a)(["\n  height: 100%;\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  & header {\n    background: blanchedalmond;\n    width: 100vw;\n    align-self: center;\n  }\n  & h1 {\n    width: max-content;\n    position: relative;\n    left: 20%;\n  }\n  & main {\n    padding: 2em 0;\n  }\n"]);return $=function(){return e},e}var _=k.a.div($()),ee=function(){var e=Object(c.b)();return a.a.createElement(_,null,a.a.createElement("header",null,a.a.createElement("h1",null,"Phone Book")),a.a.createElement("main",null,a.a.createElement(g,null),a.a.createElement(Z,null),a.a.createElement(T,{onSubmit:function(n){e(A(n))}})))},ne=Object(u.c)({name:"phoneBook",initialState:{phoneBook:[],loading:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(U.pending,(function(e){e.loading="pending",e.error=null})).addCase(U.fulfilled,(function(e,n){e.loading="idle",e.phoneBook=n.payload})).addCase(A.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(A.fulfilled,(function(e,n){e.loading="idle",n.payload.error?e.error=n.payload.error:e.phoneBook.push(Object(E.a)({},n.payload))})).addCase(F.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(F.fulfilled,(function(e,n){e.loading="idle",e.phoneBook=e.phoneBook.filter((function(e){return e.id!==n.payload}))})).addCase(G.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(G.fulfilled,(function(e,n){e.loading="idle";var t=e.phoneBook.findIndex((function(e){return e.id===n.payload.id}));e.phoneBook.splice(t,1,n.payload)}))}}).reducer,te=Object(u.a)({reducer:{phoneBook:ne,editingId:W,search:d}});i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:te},a.a.createElement(ee,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.2235fa0a.chunk.js.map