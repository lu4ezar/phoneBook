{"version":3,"sources":["redux/slices/searchSlice.ts","redux/selectors.ts","components/input/Input.tsx","components/phone/styled.ts","components/phone/Phone.tsx","components/form/styled.ts","components/form/Form.tsx","api/index.ts","redux/slices/phoneBook/asyncActions.ts","redux/slices/phoneBook/index.ts","components/list/styled.ts","components/list/List.tsx","components/app/styled.ts","components/app/App.tsx","redux/slices/phoneBookSlice.ts","redux/store.ts","index.tsx"],"names":["searchSlice","createSlice","name","initialState","reducers","setSearchString","state","action","payload","selectPhoneBookState","phoneBook","selectLoading","loading","selectSearchString","search","selectEditingId","editingId","selectFiltered","createSelector","filter","phoneNumber","Object","keys","key","includes","length","Input","dispatch","useDispatch","value","useSelector","actions","type","onChange","e","currentTarget","placeholder","StyledLi","styled","li","Phone","data","onDelete","onEdit","phone","email","className","onClick","title","icon","Trashcan","size","Pencil","StyledForm","form","reducer","field","Form","isEditing","onSubmit","onCancel","useReducer","handleSubmit","preventDefault","submitIcon","Clock","Sync","Plus","disabled","X","url","createPhoneNumber","fetch","method","headers","body","JSON","stringify","updatePhoneNumber","deletePhoneNumber","id","fetchPhoneBook","createAsyncThunk","a","response","json","rawPhoneBook","values","api","res","status","Error","message","error","setEditingId","dropEditingId","StyledUl","ul","List","useEffect","handleCancel","map","rest","handleDelete","handleEdit","StyledApp","div","App","phoneBookSlice","extraReducers","builder","addCase","pending","fulfilled","push","index","findIndex","splice","store","configureStore","phoneBookReducer","editingIdReducer","searchReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7f90eafc.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const searchSlice = createSlice({\n  name: \"search\",\n  initialState: \"\",\n  reducers: {\n    setSearchString: (state, action) => action.payload,\n  },\n});\n\nexport default searchSlice.reducer;\n","import { createSelector } from \"@reduxjs/toolkit\";\nimport { RootState } from \"./store\";\nimport { PhoneNumber } from \"../interfaces\";\n\nconst selectPhoneNumbers = (state: RootState) => state.phoneBook.phoneBook;\n\nexport const selectPhoneBookState = (state: RootState) => state.phoneBook;\n\nexport const selectLoading = (state: RootState) => state.phoneBook.loading;\n\nexport const selectSearchString = (state: RootState) => state.search;\n\nexport const selectEditingId = (state: RootState) => state.editingId;\n\nexport const selectFiltered = createSelector(\n  [selectPhoneNumbers, selectSearchString],\n  (phoneBook, search) => {\n    const filterPhoneNumbers = (phoneNumber: PhoneNumber) => {\n      const phoneNumberKeys = Object.keys(phoneNumber);\n      const filteredPhoneNumberKeys = phoneNumberKeys.filter((key) => {\n        if (key === \"id\") {\n          return false;\n        }\n        return phoneNumber[key as keyof PhoneNumber]?.includes(search);\n      });\n      return filteredPhoneNumberKeys.length > 0;\n    };\n    return phoneBook.filter(filterPhoneNumbers);\n  }\n);\n","import React, { SyntheticEvent } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { searchSlice } from \"../../redux/slices/searchSlice\";\nimport { selectSearchString } from \"../../redux/selectors\";\n\nconst Input = () => {\n  const dispatch = useDispatch();\n  const value = useSelector(selectSearchString);\n  const { setSearchString } = searchSlice.actions;\n  const handleChange = (e: SyntheticEvent) => {\n    const { value } = e.currentTarget as HTMLInputElement;\n    dispatch(setSearchString(value));\n  };\n  return (\n    <input\n      type=\"search\"\n      value={value}\n      onChange={handleChange}\n      placeholder=\"search\"\n    />\n  );\n};\n\nexport default Input;\n","import styled from \"styled-components\";\n\nexport const StyledLi = styled.li`\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid silver;\n  align-items: center;\n  & span {\n    display: flex;\n    flex: 1 0 25%;\n    & svg {\n      padding: 1em;\n      cursor: pointer;\n    }\n    &.buttons {\n      justify-content: flex-end;\n    }\n  }\n`;\n","import React from \"react\";\nimport Octicon, { Trashcan, Pencil } from \"@primer/octicons-react\";\nimport { StyledLi } from \"./styled\";\nimport { Props } from \"../../interfaces/phone\";\n\nconst Phone = ({ data, onDelete, onEdit }: Props) => {\n  const { phone, name, email } = data;\n  return (\n    <StyledLi>\n      <span>{phone}</span>\n      <span>{name}</span>\n      <span>{email}</span>\n      <span className=\"buttons\">\n        <div onClick={onDelete} title=\"delete\">\n          <Octicon icon={Trashcan} size=\"medium\" />\n        </div>\n        <div onClick={onEdit} title=\"edit\">\n          <Octicon icon={Pencil} size=\"medium\" />\n        </div>\n      </span>\n    </StyledLi>\n  );\n};\n\nexport default Phone;\n","import styled from \"styled-components\";\n\nexport const StyledForm = styled.form`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0.5em 0;\n  padding: 0.5em 0;\n  border-bottom: 1px solid silver;\n  height: 3em;\n  &.editing {\n    color: red;\n    border-radius: 4px;\n    background: lightgray;\n    input {\n      background: lightgray;\n      color: purple;\n      font-size: 1.2em;\n      font-weight: bold;\n    }\n  }\n  input,\n  .quarter {\n    flex: 1 0 25%;\n  }\n  .quarter {\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  input:not([type=\"submit\"]):not([type=\"button\"]) {\n    border: none;\n  }\n  & svg {\n    padding: 0 1em;\n    cursor: pointer;\n  }\n  .disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    padding-right: 2em;\n  }\n`;\n","import React, { useReducer, FormEvent, SyntheticEvent } from \"react\";\nimport Octicon, { Clock, Plus, Sync, X } from \"@primer/octicons-react\";\nimport { StyledForm } from \"./styled\";\nimport { Reducer, State, Props } from \"../../interfaces/form\";\nimport { selectLoading } from \"../../redux/selectors\";\nimport { useSelector } from \"react-redux\";\n\nconst initialState: State = {\n  name: \"\",\n  phone: \"\",\n  email: \"\",\n};\n\nconst reducer = (state: State, { field, value, type }: Reducer) => {\n  if (type === \"reset\") {\n    return initialState;\n  }\n  return {\n    ...state,\n    [field as string]: value,\n  };\n};\n\nconst Form = ({\n  data = initialState,\n  isEditing = false,\n  onSubmit,\n  onCancel,\n}: Props) => {\n  const [state, dispatch] = useReducer(reducer, data);\n  const { name, phone, email } = state;\n  const loading = useSelector(selectLoading);\n  const onChange = (e: SyntheticEvent) => {\n    const { name, value } = e.currentTarget as HTMLInputElement;\n    dispatch({ field: name, value });\n  };\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    onSubmit(state);\n    dispatch({ type: \"reset\" });\n  };\n\n  const submitIcon = loading === \"pending\" ? Clock : isEditing ? Sync : Plus;\n  const disabled = !phone || !name || !email;\n\n  return (\n    <StyledForm onSubmit={handleSubmit} className={isEditing ? \"editing\" : \"\"}>\n      <input\n        name=\"phone\"\n        type=\"tel\"\n        value={phone}\n        placeholder=\"phone\"\n        onChange={onChange}\n      />\n      <input\n        name=\"name\"\n        type=\"text\"\n        value={name}\n        placeholder=\"name\"\n        onChange={onChange}\n      />\n      <input\n        name=\"email\"\n        type=\"email\"\n        value={email}\n        placeholder=\"email\"\n        onChange={onChange}\n      />\n      <div className=\"quarter\">\n        {isEditing && (\n          <span onClick={onCancel} title=\"cancel\">\n            <Octicon icon={X} size=\"medium\" />\n          </span>\n        )}\n        <span\n          className={disabled ? \"disabled\" : \"\"}\n          onClick={disabled ? () => {} : handleSubmit}\n          title=\"submit\"\n        >\n          <Octicon icon={submitIcon} size=\"medium\" />\n        </span>\n      </div>\n    </StyledForm>\n  );\n};\n\nexport default Form;\n","import { PhoneNumber, PhoneNumberId } from \"../interfaces\";\n\nconst url = \"https://phone-book-decentury.herokuapp.com/api/pb/\";\n\nexport const fetchPhoneBook = () => fetch(url);\n\nexport const createPhoneNumber = (data: PhoneNumber) =>\n  fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ data: { ...data } }),\n  });\n\nexport const readPhoneNumberById = (id: PhoneNumberId) => fetch(url + id);\n\nexport const updatePhoneNumber = (data: PhoneNumber) =>\n  fetch(url, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ data: { ...data } }),\n  });\n\nexport const deletePhoneNumber = (id: PhoneNumberId) =>\n  fetch(url + id, {\n    method: \"DELETE\",\n  });\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport * as api from \"../../../api\";\nimport { PhoneNumber, PhoneNumberId, PhoneBook } from \"../../../interfaces\";\n\nexport const fetchPhoneBook = createAsyncThunk(\n  \"phoneBook/fetchPhoneBook\",\n  async () => {\n    const response = await api.fetchPhoneBook();\n    const rawPhoneBook = await response.json();\n    return Object.values(rawPhoneBook).filter(\n      (phoneNumber) => phoneNumber\n    ) as PhoneBook;\n  }\n);\n\nexport const createPhoneNumber = createAsyncThunk(\n  \"phoneBook/createPhoneNumber\",\n  async (data: PhoneNumber) => {\n    try {\n      const response = await api.createPhoneNumber(data);\n      const res = await response.json();\n      if (response.status !== 200) {\n        throw new Error(res.message);\n      }\n      return res;\n    } catch (err) {\n      return { error: err.message };\n    }\n  }\n);\n\nexport const deletePhoneNumber = createAsyncThunk(\n  \"phoneBook/deletePhoneNumber\",\n  async (id: PhoneNumberId) => {\n    await api.deletePhoneNumber(id);\n    return id;\n  }\n);\n\nexport const updatePhoneNumber = createAsyncThunk(\n  \"phoneBook/updatePhoneNumber\",\n  async (data: PhoneNumber) => {\n    await api.updatePhoneNumber(data);\n    return data;\n  }\n);\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Editing } from \"../../../interfaces\";\n\nexport const editingId = createSlice({\n  name: \"editingId\",\n  initialState: null as Editing,\n  reducers: {\n    setEditingId: (state, action: PayloadAction<Editing>) => action.payload,\n    dropEditingId: (state) => null,\n  },\n});\n\nexport const { setEditingId, dropEditingId } = editingId.actions;\n\nexport default editingId.reducer;\n","import styled from \"styled-components\";\n\nexport const StyledUl = styled.ul`\n  list-style-type: none;\n  margin: 1em 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  height: 100%;\n`;\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Phone from \"../phone\";\nimport Form from \"../form\";\nimport {\n  selectPhoneBookState,\n  selectFiltered,\n  selectEditingId,\n} from \"../../redux/selectors\";\nimport {\n  fetchPhoneBook,\n  deletePhoneNumber,\n  updatePhoneNumber,\n} from \"../../redux/slices/phoneBook/asyncActions\";\nimport { setEditingId, dropEditingId } from \"../../redux/slices/phoneBook\";\nimport { StyledUl } from \"./styled\";\nimport { PhoneNumber, PhoneNumberId } from \"../../interfaces\";\n\nconst List = () => {\n  const { loading, error } = useSelector(selectPhoneBookState);\n  const editingId = useSelector(selectEditingId);\n  const dispatch = useDispatch();\n  const phoneBook = useSelector(selectFiltered);\n\n  useEffect(() => {\n    dispatch(fetchPhoneBook());\n    return () => {\n      dispatch(fetchPhoneBook());\n    };\n  }, [dispatch]);\n\n  const handleSubmit = (data: PhoneNumber, id: PhoneNumberId) => {\n    dispatch(updatePhoneNumber({ ...data, id }));\n    dispatch(dropEditingId());\n  };\n\n  const handleDelete = (id: PhoneNumberId) => {\n    dispatch(deletePhoneNumber(id));\n  };\n\n  const handleEdit = (id: PhoneNumberId) => {\n    dispatch(setEditingId(id));\n  };\n\n  const handleCancel = () => {\n    dispatch(dropEditingId());\n  };\n\n  return (\n    <StyledUl>\n      {phoneBook.map(({ id, ...rest }) =>\n        id === editingId ? (\n          <Form\n            key={id}\n            data={rest}\n            isEditing\n            onCancel={handleCancel}\n            onSubmit={(data) => handleSubmit(data, id)}\n          />\n        ) : (\n          <Phone\n            key={id}\n            data={rest}\n            onDelete={() => handleDelete(id as PhoneNumberId)}\n            onEdit={() => handleEdit(id as PhoneNumberId)}\n          />\n        )\n      )}\n      {loading === \"pending\" && <p>Loading...</p>}\n      {error && <p>Error: {error}</p>}\n    </StyledUl>\n  );\n};\n\nexport default List;\n","import styled from \"styled-components\";\n\nexport const StyledApp = styled.div`\n  height: 100%;\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  & header {\n    background: blanchedalmond;\n    width: 100vw;\n    align-self: center;\n  }\n  & h1 {\n    width: max-content;\n    position: relative;\n    left: 20%;\n  }\n  & main {\n    padding: 2em 0;\n  }\n`;\n","import React from \"react\";\nimport Input from \"../input\";\nimport List from \"../list\";\nimport Form from \"../form\";\nimport { StyledApp } from \"./styled\";\nimport { useDispatch } from \"react-redux\";\nimport { createPhoneNumber } from \"../../redux/slices/phoneBook/asyncActions\";\nimport { PhoneNumber } from \"../../interfaces\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const handleSubmit = (data: PhoneNumber) => {\n    dispatch(createPhoneNumber(data));\n  };\n\n  return (\n    <StyledApp>\n      <header>\n        <h1>Phone Book</h1>\n      </header>\n      <main>\n        <Input />\n        <List />\n        <Form onSubmit={handleSubmit} />\n      </main>\n    </StyledApp>\n  );\n};\n\nexport default App;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { PhoneBook, PhoneBookState } from \"../../interfaces\";\nimport {\n  fetchPhoneBook,\n  createPhoneNumber,\n  deletePhoneNumber,\n  updatePhoneNumber,\n} from \"./phoneBook/asyncActions\";\n\nconst initialState: PhoneBookState = {\n  phoneBook: [] as PhoneBook,\n  loading: \"idle\",\n  error: null as PhoneBookState[\"error\"],\n};\n\nexport const phoneBookSlice = createSlice({\n  name: \"phoneBook\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchPhoneBook.pending, (state) => {\n        state.loading = \"pending\";\n        state.error = null;\n      })\n      .addCase(fetchPhoneBook.fulfilled, (state, action) => {\n        state.loading = \"idle\";\n        state.phoneBook = action.payload;\n      })\n      .addCase(createPhoneNumber.pending, (state, action) => {\n        state.loading = \"pending\";\n        state.error = null;\n      })\n      .addCase(createPhoneNumber.fulfilled, (state, action) => {\n        state.loading = \"idle\";\n        action.payload.error\n          ? (state.error = action.payload.error)\n          : state.phoneBook.push({\n              ...action.payload,\n            });\n      })\n      .addCase(deletePhoneNumber.pending, (state, action) => {\n        state.loading = \"pending\";\n        state.error = null;\n      })\n      .addCase(deletePhoneNumber.fulfilled, (state, action) => {\n        state.loading = \"idle\";\n        state.phoneBook = state.phoneBook.filter(\n          ({ id }) => id !== action.payload\n        );\n      })\n      .addCase(updatePhoneNumber.pending, (state, action) => {\n        state.loading = \"pending\";\n        state.error = null;\n      })\n      .addCase(updatePhoneNumber.fulfilled, (state, action) => {\n        state.loading = \"idle\";\n        const index = state.phoneBook.findIndex(\n          ({ id }) => id === action.payload.id\n        );\n        state.phoneBook.splice(index, 1, action.payload);\n      });\n  },\n});\n\nexport default phoneBookSlice.reducer;\n","import { configureStore, ThunkAction, Action } from \"@reduxjs/toolkit\";\nimport phoneBookReducer from \"./slices/phoneBookSlice\";\nimport editingIdReducer from \"./slices/phoneBook\";\nimport searchReducer from \"./slices/searchSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    phoneBook: phoneBookReducer,\n    editingId: editingIdReducer,\n    search: searchReducer,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/app\";\nimport { store } from \"./redux/store\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}