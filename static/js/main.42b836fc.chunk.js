(this["webpackJsonpphone-book-cra"]=this["webpackJsonpphone-book-cra"]||[]).push([[0],{23:function(e,n,t){e.exports=t(37)},28:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(12),i=t.n(o),c=(t(28),t(2)),u=t(1),l=Object(u.c)({name:"search",initialState:"",reducers:{setSearchString:function(e,n){return n.payload}}}),d=l.reducer,p=t(4),s=function(e){return e.phoneBook},f=function(e){return e.phoneBook.loading},m=function(e){return e.search},h=function(e){return e.editingId},b=Object(p.a)([function(e){return e.phoneBook.phoneBook},m],(function(e,n){return e.filter((function(e){return Object.keys(e).filter((function(t){var r;return"id"!==t&&(null===(r=e[t])||void 0===r?void 0:r.includes(n))})).length>0}))})),g=function(){var e=Object(c.b)(),n=Object(c.c)(m),t=l.actions.setSearchString;return a.a.createElement("input",{value:n,onChange:function(n){var r=n.currentTarget.value;e(t(r))},placeholder:"search"})},v=t(22),j=t(5),E=t(7),y=t(8);function O(){var e=Object(E.a)(["\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  border-bottom: 1px solid silver;\n  align-items: center;\n  height: 100%;\n  & span {\n    flex: 1 0 25%;\n  }\n"]);return O=function(){return e},e}var k=y.a.li(O()),x=function(e){var n=e.data,t=e.onDelete,r=e.onEdit,o=n.phone,i=n.name,c=n.email;return a.a.createElement(k,null,a.a.createElement("span",null,o),a.a.createElement("span",null,i),a.a.createElement("span",null,c),a.a.createElement("button",{onClick:t},"Delete"),a.a.createElement("button",{onClick:r},"Edit"))},w=t(21),B=t(13);function C(){var e=Object(E.a)(['\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0.5em 0;\n  padding: 0.5em;\n  border-bottom: 1px solid silver;\n  input:not([type="submit"], [type="button"]) {\n    border: none;\n  }\n']);return C=function(){return e},e}var S=y.a.form(C()),I={name:"",phone:"",email:""},P=function(e,n){var t=n.field,r=n.value;return"reset"===n.type?I:Object(j.a)({},e,Object(B.a)({},t,r))},T=function(e){var n=e.data,t=void 0===n?I:n,o=e.isEditing,i=void 0!==o&&o,u=e.onSubmit,l=e.onCancel,d=Object(r.useReducer)(P,t),p=Object(w.a)(d,2),s=p[0],m=p[1],h=s.name,b=s.phone,g=s.email,v=function(e){var n=e.currentTarget,t=n.name,r=n.value;m({field:t,value:r})},j="pending"===Object(c.c)(f)?"Wait...":i?"Save changes":"Add phone number",E=!b||!h||!g;return a.a.createElement(S,{onSubmit:function(e){e.preventDefault(),u(s),m({type:"reset"})}},a.a.createElement("input",{name:"phone",type:"tel",value:b,placeholder:"phone",onChange:v}),a.a.createElement("input",{name:"name",type:"text",value:h,placeholder:"name",onChange:v}),a.a.createElement("input",{name:"email",type:"email",value:g,placeholder:"email",onChange:v}),i&&a.a.createElement("input",{type:"button",value:"Cancel",onClick:l}),a.a.createElement("input",{type:"submit",value:j,disabled:E}))},D=t(6),N=t.n(D),J=t(11),L="https://phone-book-decentury.herokuapp.com/api/pb/",R=function(e){return fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Object(j.a)({},e)})})},A=function(e){return fetch(L,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Object(j.a)({},e)})})},M=function(e){return fetch(L+e,{method:"DELETE"})},U=Object(u.b)("phoneBook/fetchPhoneBook",Object(J.a)(N.a.mark((function e(){var n,t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L);case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",Object.values(t).filter((function(e){return e})));case 7:case"end":return e.stop()}}),e)})))),W=Object(u.b)("phoneBook/createPhoneNumber",function(){var e=Object(J.a)(N.a.mark((function e(n){var t,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(n);case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,200===t.status){e.next=9;break}throw new Error(r.message);case 9:return e.abrupt("return",r);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}()),q=Object(u.b)("phoneBook/deletePhoneNumber",function(){var e=Object(J.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),z=Object(u.b)("phoneBook/updatePhoneNumber",function(){var e=Object(J.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),F=Object(u.c)({name:"editingId",initialState:null,reducers:{setEditingId:function(e,n){return n.payload},dropEditingId:function(e){return null}}}),G=F.actions,H=G.setEditingId,K=G.dropEditingId,Q=F.reducer;function V(){var e=Object(E.a)(["\n  list-style-type: none;\n  margin: 1em 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  height: 100%;\n"]);return V=function(){return e},e}var X=y.a.ul(V()),Y=function(){var e=Object(c.c)(s),n=e.loading,t=e.error,o=Object(c.c)(h),i=Object(c.b)(),u=Object(c.c)(b);Object(r.useEffect)((function(){return i(U()),function(){i(U())}}),[i]);var l=function(){i(K())};return a.a.createElement(X,null,u.map((function(e){var n=e.id,t=Object(v.a)(e,["id"]);return n===o?a.a.createElement(T,{key:n,data:t,isEditing:!0,onCancel:l,onSubmit:function(e){return function(e,n){i(z(Object(j.a)({},e,{id:n}))),i(K())}(e,n)}}):a.a.createElement(x,{key:n,data:t,onDelete:function(){return function(e){i(q(e))}(n)},onEdit:function(){return function(e){i(H(e))}(n)}})})),"pending"===n&&a.a.createElement("p",null,"Loading..."),t&&a.a.createElement("p",null,"Error: ",t))};function Z(){var e=Object(E.a)(["\n  height: 100%;\n  width: 60%;\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  & header {\n    background: blanchedalmond;\n    width: 100vw;\n    align-self: center;\n  }\n  & h1 {\n    width: max-content;\n    position: relative;\n    left: 20%;\n  }\n  & main {\n    padding: 2em 0;\n  }\n"]);return Z=function(){return e},e}var $=y.a.div(Z()),_=function(){var e=Object(c.b)();return a.a.createElement($,null,a.a.createElement("header",null,a.a.createElement("h1",null,"Phone Book")),a.a.createElement("main",null,a.a.createElement(g,null),a.a.createElement(Y,null),a.a.createElement(T,{onSubmit:function(n){e(W(n))}})))},ee=Object(u.c)({name:"phoneBook",initialState:{phoneBook:[],loading:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(U.pending,(function(e){e.loading="pending",e.error=null})).addCase(U.fulfilled,(function(e,n){e.loading="idle",e.phoneBook=n.payload})).addCase(W.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(W.fulfilled,(function(e,n){e.loading="idle",n.payload.error?e.error=n.payload.error:e.phoneBook.push(Object(j.a)({},n.payload))})).addCase(q.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(q.fulfilled,(function(e,n){e.loading="idle",e.phoneBook=e.phoneBook.filter((function(e){return e.id!==n.payload}))})).addCase(z.pending,(function(e,n){e.loading="pending",e.error=null})).addCase(z.fulfilled,(function(e,n){e.loading="idle";var t=e.phoneBook.findIndex((function(e){return e.id===n.payload.id}));e.phoneBook.splice(t,1,n.payload)}))}}).reducer,ne=Object(u.a)({reducer:{phoneBook:ee,editingId:Q,search:d}});i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:ne},a.a.createElement(_,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.42b836fc.chunk.js.map